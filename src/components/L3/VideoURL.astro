---
interface Props {
  videoId?: string; // YouTube video ID
  url?: string; // Direct video URL
  title: string;
  description?: string;
  type?: "youtube" | "url";
}

const { videoId, url, title, description, type = "youtube" } = Astro.props;

// Hjælpefunktion til at få YouTube thumbnail
const getYouTubeThumbnail = (id: string) =>
  `https://img.youtube.com/vi/${id}/maxresdefault.jpg`;
---

<div class="my-32 mx-auto max-w-6xl px-8">
  <div class="space-y-3">
    <div class="font-mono text-xs text-black/40">
      <span>VIDEO_ANALYSIS: {title}</span>
    </div>

    <div class="border border-black/10 overflow-hidden">
      {
        type === "youtube" && videoId && (
          <div class="relative aspect-video w-full">
            <iframe
              src={`https://www.youtube.com/embed/${videoId}`}
              title={title}
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
              allowfullscreen
              class="absolute top-0 left-0 w-full h-full"
            />
          </div>
        )
      }

      {
        type === "url" && url && (
          <video class="w-full aspect-video" controls preload="metadata">
            <source src={url} type="video/mp4" />
            Din browser understøtter ikke video-elementet.
          </video>
        )
      }
    </div>

    {
      description && (
        <div class="flex flex-col gap-2">
          <h3 class="text-xl font-light font-mono">{title}</h3>
          <p class="text-sm text-black/70 font-mono">{description}</p>
        </div>
      )
    }
  </div>
</div>
